# MarketBot

> ğŸ¤– Multi-Agent å¸‚åœºåˆ†æç³»ç»Ÿ | Crypto Â· Stocks Â· Forex

MarketBot æ˜¯ä¸€ä¸ªåŸºäº TypeScript çš„å¤š Agent å¸‚åœºåˆ†æç³»ç»Ÿï¼Œé€šè¿‡åä½œå¼ AI Agent æä¾›é£é™©æ„ŸçŸ¥çš„åˆ†ææŠ¥å‘Šã€‚

## âœ¨ ç‰¹æ€§

- ğŸ”— **å¤š Agent åä½œ** - æ„å›¾è§£æã€å¸‚åœºä½“åˆ¶ã€é£é™©è¯„ä¼°ã€åæ€ç»¼åˆ
- ğŸŒ **æµè§ˆå™¨è‡ªåŠ¨åŒ–** - è‡ªåŠ¨æœç´¢ã€æŠ“å–ç½‘é¡µè¿›è¡Œå®æ—¶åˆ†æ
- ğŸ“Š **å¤šå¸‚åœºæ”¯æŒ** - Cryptoã€è‚¡ç¥¨ã€å¤–æ±‡åŠä»»æ„å¯æœç´¢èµ„äº§
- ğŸ”Œ **å¯æ‰©å±•** - Skills æŠ€èƒ½ç³»ç»Ÿ + Tools å·¥å…·è°ƒåº¦
- ğŸ’¾ **ä¼šè¯æŒä¹…åŒ–** - æ”¯æŒå†å²è®°å½•å’Œä¸Šä¸‹æ–‡

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…
npm install && npm run build

# é…ç½® API Key
export OPENAI_API_KEY="sk-..."   # æˆ– DeepSeek
export DEEPSEEK_API_KEY="sk-..."

# è¿è¡Œåˆ†æ
node dist/index.js web-analyze "BTC ä»Šæ—¥èµ°åŠ¿åˆ†æ"
node dist/index.js web-analyze --asset GOOGL
```

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MarketBot                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 Core Pipeline (æ ¸å¿ƒæµæ°´çº¿)               â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Intent â†’ Data â†’ Interpret â†’ Regime â†’ Risk â†’ Reflect    â”‚   â”‚
â”‚  â”‚                           â†“                              â”‚   â”‚
â”‚  â”‚                     Report Generator                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  Specialized Agents                      â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚IntentParserâ”‚ â”‚MarketRegimeâ”‚ â”‚ RiskAssessment  â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  æ„å›¾è§£æ  â”‚ â”‚ å¸‚åœºä½“åˆ¶   â”‚ â”‚    é£é™©è¯„ä¼°     â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚ Reflection â”‚ â”‚ ReportGen  â”‚ â”‚ WebDataAnalyzer â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  åæ€ç»¼åˆ  â”‚ â”‚  æŠ¥å‘Šç”Ÿæˆ  â”‚ â”‚    ç½‘é¡µåˆ†æ     â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    AgentLoop æ‰§è¡Œå¾ªç¯                    â”‚   â”‚
â”‚  â”‚      request â†’ context â†’ LLM â†’ tools â†’ reply â†’ session  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Agent æ¨¡å—

| Agent | èŒè´£ | è¾“å‡º |
|-------|------|------|
| **IntentParser** | è§£æç”¨æˆ·æŸ¥è¯¢æ„å›¾ | asset, market, timeframes |
| **MarketDataInterpreter** | è§£è¯»å¸‚åœºæ•°æ® | structure, volatility, momentum |
| **MarketRegime** | è¯†åˆ«å¸‚åœºä½“åˆ¶ | regime, strategy, confidence |
| **RiskAssessment** | è¯„ä¼°äº¤æ˜“é£é™© | risk_level, position_size |
| **Reflection** | ç»¼åˆåˆ†æã€è¯†åˆ«ç›²ç‚¹ | confidence, alternatives |
| **ReportGenerator** | ç”Ÿæˆä¸“ä¸šæŠ¥å‘Š | Markdown Report |
| **WebDataAnalyzer** | ç½‘é¡µæœç´¢+åˆ†æ | æœç´¢ç»“æœã€åˆ†ææŠ¥å‘Š |

### ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ agents/          # Agent å®ç° (7ä¸ªä¸“ä¸š Agent)
â”œâ”€â”€ core/            # æµæ°´çº¿ã€LLM æ¥å£
â”œâ”€â”€ pipeline/        # è‚¡ç¥¨åˆ†ææµæ°´çº¿
â”œâ”€â”€ service/         # ç»Ÿä¸€æœåŠ¡å±‚
â”œâ”€â”€ gateway/         # æ¶ˆæ¯ç½‘å…³
â”œâ”€â”€ web/             # æµè§ˆå™¨æœç´¢ã€æŠ“å–
â”œâ”€â”€ data/            # å¸‚åœºæ•°æ®æœåŠ¡
â”œâ”€â”€ tools/           # å·¥å…·è°ƒåº¦
â”œâ”€â”€ skills/          # æŠ€èƒ½ç³»ç»Ÿ
â”œâ”€â”€ commands/        # CLI å‘½ä»¤
â””â”€â”€ server/          # HTTP æœåŠ¡å™¨
```

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### Web æœç´¢åˆ†æ

```bash
# OpenAI (é»˜è®¤)
OPENAI_API_KEY="sk-..." node dist/index.js web-analyze "BTC åˆ†æ"

# DeepSeek
DEEPSEEK_API_KEY="sk-..." node dist/index.js web-analyze "GOOGL è‚¡ç¥¨"

# èµ„äº§æ¨¡å¼
node dist/index.js web-analyze --asset ETH

# JSON è¾“å‡º
node dist/index.js web-analyze "SOL analysis" --json
```

### HTTP API

```bash
# å¯åŠ¨æœåŠ¡å™¨
node dist/index.js server --port 8787

# è°ƒç”¨åˆ†æ
curl -X POST http://127.0.0.1:8787/analyze \
  -H "Content-Type: application/json" \
  -d '{"query":"Analyze BTC"}'
```

### Agent ç®¡ç†

```bash
node dist/index.js agents list
node dist/index.js agents add analyst --name "Analyst" --default
node dist/index.js analyze --agent analyst "Analyze AAPL"
```

### Skills & Tools

```bash
# Skills
node dist/index.js skills list
node dist/index.js skills install /path/to/skill

# Tools
node dist/index.js tools list
node dist/index.js tools run market_fetch
```

---

## âš™ï¸ é…ç½®

### LLM æä¾›å•†

**OpenAI (é»˜è®¤)**

```json
{
  "llm": {
    "provider": "openai-compatible",
    "model": "gpt-4o-mini",
    "baseUrl": "https://api.openai.com/v1",
    "apiKeyEnv": "OPENAI_API_KEY"
  }
}
```

**DeepSeek**

```json
{
  "llm": {
    "provider": "openai-compatible",
    "model": "deepseek-chat",
    "baseUrl": "https://api.deepseek.com/v1",
    "apiKeyEnv": "DEEPSEEK_API_KEY"
  }
}
```

### æµè§ˆå™¨é…ç½®

```json
{
  "web": {
    "search": {
      "provider": "browser",
      "maxResults": 5,
      "headless": false
    }
  }
}
```

### å®Œæ•´é…ç½®ç¤ºä¾‹

åˆ›å»º `marketbot.json`:

```json
{
  "llm": {
    "provider": "openai-compatible",
    "model": "deepseek-chat",
    "baseUrl": "https://api.deepseek.com/v1",
    "apiKeyEnv": "DEEPSEEK_API_KEY"
  },
  "web": {
    "search": { "provider": "browser", "maxResults": 5, "headless": true }
  },
  "agents": {
    "defaults": { "workspace": "./marketbot-workspace" },
    "list": [{ "id": "main", "name": "MarketBot", "default": true }]
  },
  "tools": { "profile": "analysis" },
  "sessions": { "enabled": true, "maxEntries": 20 }
}
```

---

## ğŸ”§ ç¯å¢ƒå˜é‡

| å˜é‡ | è¯´æ˜ |
|------|------|
| `OPENAI_API_KEY` | OpenAI API Key |
| `DEEPSEEK_API_KEY` | DeepSeek API Key |
| `DATA_MODE` | `mock` / `auto` / `api` / `scrape` |
| `ENABLE_WEB_SEARCH` | å¯ç”¨ç½‘é¡µæœç´¢ |
| `MARKETBOT_CONFIG_PATH` | é…ç½®æ–‡ä»¶è·¯å¾„ |

---

## ğŸ“‹ æŠ¥å‘Šæ ¼å¼

ç”Ÿæˆçš„åˆ†ææŠ¥å‘Šé‡‡ç”¨ä¸“ä¸šä¸€é¡µå¼ç»“æ„ï¼š

```
ğŸ“„ AI è‚¡ç¥¨åˆ†ææŠ¥å‘Š
â”œâ”€â”€ ğŸŸ¦ æ ¸å¿ƒç»“è®º (Signal, Entry/TP/SL)
â”œâ”€â”€ ğŸŸ¨ å¸‚åœºçŠ¶æ€ (Regime, Trend)
â”œâ”€â”€ ğŸŸ© å…³é”®ä¾æ® (æŠ€æœ¯é¢, äº‹ä»¶)
â”œâ”€â”€ ğŸŸ¥ é£é™©è­¦ç¤º (é£é™©, å¤±æ•ˆæ¡ä»¶)
â”œâ”€â”€ ğŸ“ åˆ†ææ‘˜è¦
â””â”€â”€ ğŸŸª AI è‡ªæ£€ & å…è´£å£°æ˜
```

---

## âš ï¸ å…è´£å£°æ˜

- æœ¬ç³»ç»Ÿä¸º **å†³ç­–æ”¯æŒåˆ†æ**ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®
- CLI é»˜è®¤ä½¿ç”¨ mock æ•°æ®ï¼Œéœ€ `--live` å¯ç”¨å®æ—¶æ•°æ®
- æŠ•èµ„æœ‰é£é™©ï¼Œå…¥å¸‚éœ€è°¨æ…

---

## ğŸ“œ License

MIT
