<div align="center">

# ğŸ“ˆ MarketBot

[![License: AGPL-3.0](https://img.shields.io/badge/License-AGPL--3.0-blue.svg)](https://www.gnu.org/licenses/agpl-3.0)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue.svg)](https://www.typescriptlang.org/)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)

> ğŸ¤– Multi-Agent Market Analysis System | Crypto Â· Stocks Â· Futures Â· Forex | AI-Powered Decision Dashboard

[**Features**](#-features) â€¢ [**Quick Start**](#-quick-start) â€¢ [**Architecture**](#-architecture) â€¢ [**Configuration**](#-configuration)

English | [ç®€ä½“ä¸­æ–‡](README_CN.md)

</div>

## âœ¨ Features

### ğŸ¯ Core Features

- **AI Decision Dashboard** - One-line conclusion + precise entry/exit levels + risk checklist
- **Multi-Agent Collaboration** - Intent â†’ Regime â†’ Risk â†’ Reflection â†’ Report
- **Browser Automation** - Auto-search news, scrape web pages for real-time analysis
- **Multi-Market Support** - Crypto, US/HK/A-shares, Futures, Forex, and any searchable assets
- **Multi-Channel Push** - WeChat Work, Feishu, Telegram, Webhook

### ğŸ›¡ï¸ Built-in Trading Philosophy

- âŒ **No Chasing** - Auto-flag "Danger" when deviation > 5%
- âœ… **Trend Trading** - MA5 > MA10 > MA20 bullish alignment
- ğŸ“ **Precise Levels** - Entry, stop-loss, target prices
- ğŸ“‹ **Checklist** - Each condition marked with âœ…âš ï¸âŒ

### ğŸ“Š Data Sources

- **Market Data**: Yahoo Finance, Binance (auto-switch)
- **News Search**: Browser automation (DuckDuckGo/Bing)
- **AI Analysis**: OpenAI, DeepSeek, and other OpenAI-compatible APIs

## ğŸ¥ Demo

> **Query**: `marketbot web-analyze "Analyze Google"`  
> **Result**: Automatic English Report Generation

```markdown
# ğŸ“„ AI Stock Analysis Report
---
ğŸ“… **2026-01-31T14:15:00.000Z** | *AI Stock Trading Snapshot*

ğŸ’µ **Current Price**: 175.50 USD | GOOGL | Yahoo Finance @ 14:15

## ğŸŸ¦ Core Conclusion
| Direction & Confidence | Params | Rationale |
|:---|:---|:---|
| ğŸŸ¢ **LONG â†‘** | Entry: 172.00 | Uptrend |
| â­â­â­â­â˜† (85/100) | TP: 195.00 | Bullish |
| **Uptrend** | SL: 165.00 | Positive Crossover |

## ğŸŸ¨ Market & Status
| Regime | Status |
|:---|:---|
| Regime: Risk-On ğŸ“ˆ | Trend: Uptrend |
| Volatility: Medium | Structure: Bullish |

## ğŸŸ© Key Drivers
### ğŸ“Š Technicals
- MA: Bullish
- MACD: Positive Crossover
- RSI: Neutral (55)

### ğŸ“° Events/Fundamentals
- Dominant market share in Search (>90%)
- Aggressive AI integration with Gemini models
- Cloud revenue growing +25% YoY
- Facing antitrust scrutiny in EU and US

## ğŸŸ¥ Risks & Invalidation
### âš ï¸ Main Risks
- Regulatory/Antitrust fines
- AI competition (OpenAI/Microsoft)
---
> âš ï¸ **Disclaimer**: Generated by AI for research only. Not financial advice.
```

## ğŸš€ Quick Start

### 1. Installation

```bash
git clone https://github.com/EthanAlgoX/MarketBot.git
cd MarketBot
npm install
npm run build
```

### 2. Configure API Key

**Support for OpenAI, DeepSeek, Gemini, Claude, Qwen, Moonshot, Ollama**

Detailed configuration can be found in [Configuration](#-configuration) section.

**Example: OpenAI (Default)**

```bash
# Option 1: Environment variable
export OPENAI_API_KEY="sk-..."

# Option 2: .env file
echo 'OPENAI_API_KEY=sk-...' > .env
```

### 3. Run Analysis

```bash
# Analyze stock
node dist/index.js web-analyze "GOOGL stock analysis"

# Analyze cryptocurrency
node dist/index.js web-analyze "BTC price prediction"

# Asset mode (auto-search price, news, sentiment)
node dist/index.js web-analyze --asset ETH
```

### 4. Done

First run will automatically download Chromium for web search.

## ğŸ“± Output Example

### Decision Dashboard

```
ğŸ“„ AI Stock Analysis Report
---
ğŸ“… 2026-01-31 | AI Stock Trading Snapshot

## ğŸŸ¦ Core Conclusion

| Direction & Confidence | Trading Params | Core Logic |
|:---|:---|:---|
| ğŸŸ¢ LONG â†‘ | Entry: $338.00 | Uptrend |
| â­â­â­â­â˜† (80/100) | TP: $350.00 | Bullish MA |
| **Trending Up** | SL: $320.00 | MACD Cross |

### ğŸ§  Agentic Mode (New)

The agentic mode allows the LLM to autonomously decide which tools to use and how to analyze data, rather than following a fixed pipeline.

```bash
# Enable agentic mode with --agentic flag
node dist/index.js analyze "Deep analysis of NVIDIA" --agentic

# With verbose output to see tool calls
node dist/index.js analyze "Compare BTC and ETH" --agentic --verbose
```

## ğŸŸ© Key Drivers

### ğŸ“Š Technical

- MA: Bullish alignment
- MACD: Golden cross
- RSI: Normal range

### ğŸ“° Events/Fundamentals

- Earnings on 2/4
- Analyst rating: Strong Buy

## ğŸŸ¥ Risk & Invalidation

- Market volatility risk
- Invalidated if daily close < $320

---
âš ï¸ Disclaimer: AI-generated report for research only, not investment advice.

```

## ğŸ—ï¸ Architecture

```

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MarketBot                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 Core Pipeline                            â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Intent â†’ Data â†’ Interpret â†’ Regime â†’ Risk â†’ Reflect    â”‚   â”‚
â”‚  â”‚                           â†“                              â”‚   â”‚
â”‚  â”‚                     Report Generator                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  Specialized Agents                      â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚IntentParserâ”‚ â”‚MarketRegimeâ”‚ â”‚ RiskAssessment  â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚ Reflection â”‚ â”‚ ReportGen  â”‚ â”‚ WebDataAnalyzer â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

### Agent Modules

| Agent | Responsibility | Output |
|-------|----------------|--------|
| **IntentParser** | Parse user query intent | asset, market, timeframes |
| **MarketDataInterpreter** | Interpret market data | structure, volatility, momentum |
| **MarketRegime** | Identify market regime | regime, strategy, confidence |
| **RiskAssessment** | Evaluate trading risk | risk_level, position_size |
| **Reflection** | Synthesize analysis | confidence, alternatives |
| **ReportGenerator** | Generate pro report | Markdown Report |
| **WebDataAnalyzer** | Web search + analysis | search results, report |

## ğŸ§° Default Skills

Default skills are preloaded under `marketbot-workspace/main/skills`:

- `market-scan` (tool: `market_fetch`)
- `market-summary` (tool: `market_summary`)
- `indicator-check` (tool: `indicators_compute`)
- `report-render` (tool: `report_render`)
- `web-fetch` (tool: `http_get`)

## âš™ï¸ Configuration

### LLM Provider

Create `marketbot.json` with your preferred provider:

| Provider | Model | Base URL | API Key Env |
|----------|-------|----------|-------------|
| **OpenAI** â­ | `gpt-4o-mini` | `https://api.openai.com/v1` | `OPENAI_API_KEY` |
| **OpenAI-Compatible (Custom)** | `your-model` | `https://your-openai-compatible-endpoint/v1` | `LLM_API_KEY` |
| **Gemini** | `gemini-2.0-flash` | `https://generativelanguage.googleapis.com/v1beta/openai` | `GEMINI_API_KEY` |
| **Claude** | `claude-3-5-sonnet-20241022` | `https://api.anthropic.com/v1` | `ANTHROPIC_API_KEY` |
| **Qwen** | `qwen-turbo` | `https://dashscope.aliyuncs.com/compatible-mode/v1` | `DASHSCOPE_API_KEY` |
| **Moonshot** | `moonshot-v1-8k` | `https://api.moonshot.cn/v1` | `MOONSHOT_API_KEY` |
| **Ollama** | `llama3.2` | `http://localhost:11434/v1` | - |

**Example Configurations:**

<details>
<summary><b>OpenAI (Default)</b></summary>

```json
{
  "llm": {
    "provider": "openai-compatible",
    "model": "gpt-4o-mini",
    "baseUrl": "https://api.openai.com/v1",
    "apiKeyEnv": "OPENAI_API_KEY"
  }
}
```

</details>

<details>
<summary><b>OpenAI-Compatible (Custom)</b></summary>

```json
{
  "llm": {
    "provider": "openai-compatible",
    "model": "your-model",
    "baseUrl": "https://your-openai-compatible-endpoint/v1",
    "apiKeyEnv": "LLM_API_KEY"
  }
}
```

</details>

<details>
<summary><b>Google Gemini (Free Tier)</b></summary>

```json
{
  "llm": {
    "provider": "openai-compatible",
    "model": "gemini-2.0-flash",
    "baseUrl": "https://generativelanguage.googleapis.com/v1beta/openai",
    "apiKeyEnv": "GEMINI_API_KEY"
  }
}
```

Get free API key: [Google AI Studio](https://aistudio.google.com/)
</details>

<details>
<summary><b>Anthropic Claude</b></summary>

```json
{
  "llm": {
    "provider": "openai-compatible",
    "model": "claude-3-5-sonnet-20241022",
    "baseUrl": "https://api.anthropic.com/v1",
    "apiKeyEnv": "ANTHROPIC_API_KEY"
  }
}
```

</details>

<details>
<summary><b>Alibaba Qwen (é€šä¹‰åƒé—®)</b></summary>

```json
{
  "llm": {
    "provider": "openai-compatible",
    "model": "qwen-turbo",
    "baseUrl": "https://dashscope.aliyuncs.com/compatible-mode/v1",
    "apiKeyEnv": "DASHSCOPE_API_KEY"
  }
}
```

</details>

<details>
<summary><b>Moonshot (Kimi)</b></summary>

```json
{
  "llm": {
    "provider": "openai-compatible",
    "model": "moonshot-v1-8k",
    "baseUrl": "https://api.moonshot.cn/v1",
    "apiKeyEnv": "MOONSHOT_API_KEY"
  }
}
```

</details>

<details>
<summary><b>Ollama (Local)</b></summary>

```json
{
  "llm": {
    "provider": "openai-compatible",
    "model": "llama3.2",
    "baseUrl": "http://localhost:11434/v1",
    "apiKeyEnv": ""
  }
}
```

First run: `ollama pull llama3.2`
</details>

### Browser Config

```json
{
  "web": {
    "search": {
      "provider": "browser",
      "maxResults": 5,
      "headless": true
    }
  }
}
```

## ğŸ–¥ï¸ HTTP API

```bash
# Start server
node dist/index.js server --port 8787

# Health check
curl http://127.0.0.1:8787/health

# Analyze
curl -X POST http://127.0.0.1:8787/analyze \
  -H "Content-Type: application/json" \
  -d '{"query":"Analyze BTC"}'
```

## ğŸ“ Project Structure

```
MarketBot/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agents/          # Specialized Agents (7)
â”‚   â”œâ”€â”€ core/            # Pipeline, LLM interface
â”‚   â”œâ”€â”€ pipeline/        # Stock analysis pipeline
â”‚   â”œâ”€â”€ service/         # Unified service layer
â”‚   â”œâ”€â”€ web/             # Browser search/scrape
â”‚   â”œâ”€â”€ tools/           # Tool dispatch
â”‚   â”œâ”€â”€ skills/          # Skill system
â”‚   â”œâ”€â”€ commands/        # CLI commands
â”‚   â””â”€â”€ server/          # HTTP server
â”œâ”€â”€ marketbot.json       # Config file
â””â”€â”€ package.json
```

## ğŸ—ºï¸ Roadmap

### ğŸ”” Notification Channels

- [x] WeChat Work Bot
- [x] Feishu Bot
- [x] Telegram Bot
- [x] Custom Webhook
- [ ] Email Notification

### ğŸ¤– AI Models

- [x] OpenAI GPT-4/GPT-4o
- [x] DeepSeek
- [x] Qwen
- [ ] Local Models (Ollama)

### ğŸ“Š Data Sources

- [x] Yahoo Finance
- [x] Binance
- [x] Browser Search
- [ ] Tushare Pro
- [ ] AkShare

### ğŸ¯ Features

- [x] Decision Dashboard
- [x] Multi-Agent Collaboration
- [x] One-Page Report
- [x] HTTP API
- [ ] Historical Backtesting
- [ ] GitHub Actions Scheduled Run

## âš ï¸ Disclaimer

This project is for learning and research purposes only and does not constitute any investment advice. The stock market is risky, please invest cautiously. The author is not responsible for any losses resulting from the use of this project.

## ğŸ“„ License

[AGPL-3.0 License](LICENSE) Â© 2026 EthanAlgoX

---

<div align="center">

**If you find it useful, please give it a â­ Star!**

</div>
